ZigBee — спецификация сетевых протоколов верхнего уровня — уровня приложений APS (англ. application support sublayer) и сетевого уровня NWK, — использующих сервисы нижних уровней — уровня управления доступом к среде MAC и физического уровня PHY, регламентированных стандартом IEEE 802.15.4. ZigBee и IEEE 802.15.4 описывают беспроводные персональные вычислительные сети (WPAN). Спецификация ZigBee ориентирована на приложения, требующие гарантированной безопасной передачи данных при относительно небольших скоростях и возможности длительной работы сетевых устройств от автономных источников питания (батарей).

Основная особенность технологии ZigBee заключается в том, что она при малом энергопотреблении поддерживает не только простые топологии сети («точка-точка», «дерево» и «звезда»), но и самоорганизующуюся и самовосстанавливающуюся ячеистую (mesh) топологию с ретрансляцией и маршрутизацией сообщений. Кроме того, спецификация ZigBee содержит возможность выбора алгоритма маршрутизации, в зависимости от требований приложения и состояния сети, механизм стандартизации приложений — профили приложений, библиотека стандартных кластеров, конечные точки, привязки, гибкий механизм безопасности, а также обеспечивает простоту развертывания, обслуживания и модернизации.

Области применения
Основными областями применения технологии ZigBee являются беспроводные сенсорные сети, автоматизация жилья («Умный дом» и «Интеллектуальное здание»), медицинское оборудование, системы промышленного мониторинга и управления, а также бытовая электроника и «периферия» персональных компьютеров.
Способность к самоорганизации и самовосстановлению, ячеистая (mesh-) топология, защищённость, высокая помехоустойчивость, низкое энергопотребление и отсутствие необходимости получения частотного разрешения делают ZigBee-сеть подходящей основой для беспроводной инфраструктуры систем позиционирования в режиме реального времени (RTLS).

Описание
ZigBee — стандарт для набора высокоуровневых протоколов связи, использующих небольшие, маломощные цифровые трансиверы, основанный на стандарте IEEE 802.15.4-2006 для беспроводных персональных сетей, таких как, например, беспроводные наушники, соединённые с мобильными телефонами посредством радиоволн коротковолнового диапазона. Технология определяется спецификацией ZigBee, разработанной с намерением быть проще и дешевле, чем остальные персональные сети, такие как Bluetooth. ZigBee предназначен для радиочастотных устройств, где необходима длительная работа от батареек и безопасность передачи данных по сети.
Альянс ZigBee является органом, обеспечивающим и публикующим стандарты ZigBee, он также публикует профили приложений, что позволяет производителям изначальной комплектации создавать совместимые продукты. Текущий список профилей приложений, опубликованных, или уже находящихся в работе:

Домашняя автоматизация
Рациональное использование энергии (ZigBee Smart Energy 1.0/2.0)
Автоматизация коммерческого строительства
Телекоммуникационные приложения
Персональный, домашний и больничный уход
ИгрушкиСотрудничество между IEEE 802.15.4 и ZigBee подобно тому, что было между IEEE 802.11 и альянсом Wi-Fi. Спецификация ZigBee 1.0 была ратифицирована 14 декабря 2004 и доступна для членов альянса ZigBee. 30 октября 2007 г., была размещена спецификация ZigBee 2007. О первом профиле приложения — «Домашняя автоматизация» ZigBee, было объявлено 2 ноября 2007. ZigBee работает в промышленных, научных и медицинских (ISM-диапазон) радиодиапазонах: 868 МГц в Европе, 915 МГц в США и в Австралии, и 2.4 ГГц в большинстве стран в мире (под большинством юрисдикций стран мира). Как правило, в продаже имеются чипы ZigBee, являющиеся объединёнными радио- и микроконтроллерами с размером Flash-памяти от 60К до 128К таких производителей, как Jennic JN5148, Freescale MC13213, Ember EM250, Texas Instruments CC2430, Samsung Electro-Mechanics ZBS240 и Atmel ATmega128RFA1. Радиомодуль также можно использовать отдельно с любым процессором и микроконтроллером. Как правило, производители радиомодулей предлагают также стек программного обеспечения ZigBee, хотя доступны и другие независимые стеки.
Так как ZigBee может активироваться (то есть переходить от спящего режима к активному) за 15 миллисекунд или меньше, задержка отклика устройства может быть очень низкой, особенно по сравнению с Bluetooth, для которого задержка, образующаяся при переходе от спящего режима к активному, обычно достигает трёх секунд. Так как ZigBee большую часть времени находится в спящем режиме, уровень потребления энергии может быть очень низким, благодаря чему достигается длительная работа от батарей.
Первый выпуск стека сейчас известен под названием ZigBee 2004. Второй выпуск стека называется ZigBee 2006, и, в основном, заменяет структуру MSG/KVP, использующуюся в ZigBee 2004 вместе с «библиотекой кластеров». Стек 2004 года сейчас более или менее вышел из употребления. Реализация ZigBee 2007 в настоящее время является текущей, она содержит два профиля стека, профиль стека № 1 (который называют просто ZigBee) для домашнего и мелкого коммерческого использования, и профиль стека № 2 (который называют ZigBee Pro). ZigBee Pro предлагает больше функций, таких как широковещание, маршрутизацию вида «многие-к-одному» и высокую безопасность с использованием симметричного ключа (SKKE), в то время как ZigBee (профиль стека № 1) занимает меньше места в оперативной и Flash-памяти. Оба профиля позволяют развернуть полномасштабную сеть с ячеистой топологией и работают со всеми профилями приложений ZigBee.
ZigBee 2007 полностью совместим с устройствами ZigBee 2006. Устройство ZigBee 2007 может подключаться и работать с сетью ZigBee 2006, и наоборот. В связи с наличием различий в опциях маршрутизации, устройства ZigBee Pro могут быть только конечными устройствами (ZEDs) сетей ZigBee 2006, и наоборот, устройства ZigBee 2006 и ZigBee 2007 могут быть только конечными устройствами в сети ZigBee Pro. При этом приложения, которые запускаются на устройствах, работают одинаково, независимо от реализации профиля стека.

Приложения
Протоколы ZigBee разработаны для использования во встроенных приложениях, требующих низкую скорость передачи данных и низкое энергопотребление. Цель ZigBee — это создание недорогой, самоорганизующейся сети с ячеистой топологией предназначенной для решения широкого круга задач. Сеть может использоваться в промышленном контроле, встроенных датчиках, сборе медицинских данных, оповещении о вторжении или задымлении, строительной и домашней автоматизации и т. д. Созданная в итоге сеть потребляет очень мало энергии — индивидуальные устройства согласно данным сертификации ZigBee позволяют энергобатареям работать два года.. Типовые области приложения:
Домашние развлечения и контроль — рациональное освещение, продвинутый температурный контроль, охрана и безопасность, фильмы и музыка.
Домашнее оповещение — датчики воды и энергии, мониторинг энергии, датчики задымления и пожара, рациональные датчики доступа и переговоров.
Мобильные службы — мобильные оплата, мониторинг и контроль, охрана и контроль доступа, охрана здоровья и телепомощь.
Коммерческое строительство — мониторинг энергии, HVAC, света, контроль доступа.
Промышленное оборудование — контроль процессов, промышленных устройств, управление энергией и имуществом.Существуют три различных типа устройств ZigBee.

Координатор ZigBee (ZC) — наиболее ответственное устройство, формирует пути древа сети и может связываться с другими сетями. В каждой сети есть один координатор ZigBee. Он и запускает сеть от начала. Он хранит информацию о сети, выступает как доверенный центр и хранит ключи безопасности.
Маршрутизатор ZigBee (ZR) — Маршрутизатор может выступать в качестве промежуточного маршрутизатора, передавая данные с других устройств. Он также может запускать функцию приложения.
Конечное устройство ZigBee (ZED) — его функциональная нагруженность позволяет ему обмениваться информацией с материнским узлом (или координатором, или с маршрутизатором), он не может передавать данные с других устройств. Такое отношение позволяет узлу львиную часть времени пребывать в спящем состоянии, что позволяет экономить энергоресурс батарей. ZED требует минимальное количество памяти, и поэтому может быть дешевле в производстве, чем ZR или ZC.

Протоколы
Протоколы построены на недавно разработанном алгоритме AODV (протокол динамической маршрутизации для мобильных ad-hoc сетей (MANET) и других беспроводных сетей) и NeuRFon предназначенными для образования ad-hoc сетей (децентрализованная беспроводная сеть, образованная случайными абонентами) или узлов. В большинстве случаев сеть является скоплением скоплений. Она также может принимать форму сети или одиночного скопления. Текущие профили получаются из протоколов ZigBee поддерживают сети со включёнными или с отключёнными маячками.
В сетях с отключёнными маячками (где порядок маячков составляет 15) используется механизм доступа к каналам. В этом типе сети маршрутизаторы ZigBee обычно поддерживают свои приёмники включёнными продолжительно, что требует более мощной энергоподдержки. Однако это позволяет разнородным сетям, в которых некоторые устройства продолжительно принимают, пока другие только передают, в то время, когда определяются внешние сигналы. Типичный пример разнородной сети — это беспроводной ламповый выключатель. Узел ZigBee в лампе может принимать постоянно, с того времени как он подключён к общему питанию, в то время как ключ, соединяющий лампу с батареей, остаётся в спящем режиме, пока выключатель отключён. Затем ключ переходит в активный режим, посылает лампе команду, ожидая подтверждения, и возвращается в спящее состояние. В таких сетях узел лампы должен быть, по меньшей мере, маршрутизатором ZigBee, если не координатором, узел ключа, обычно, это конечное устройство ZigBee.
В сетях с маячками специальные узлы сети, маршрутизаторы ZigBee, передают периодические маячки, чтобы подтвердить своё присутствие на других узлах сети. Узлы могут находиться в спящем состоянии между маячками, что снижает их скважность и увеличивает жизнь батареек. Интервалы маячков могут различаться от 15.36 мс до 15.36 мс * 214 = 251.65824 с для скорости в 250 kbit/s, от 24 мс до 24 мс * 214 = 393.216 с для скорости в 40 kbit/s и от 48 мс до 48 мс * 214 = 786.432 с для 20 kbit/s. Однако низкая скважность операций (сигналов) вместе с длинными интервалами маячков требует точного распределения времени, что может войти в противоречие с требованием низкой стоимости изделия.
В общем, протоколы ZigBee снижают время включения радиопередатчиков и сокращают энергопотребление. В маячковых сетях узлы должны быть активными только во время осуществления маячком передачи. В безмаячковых сетях расход энергии решительно асимметричен, некоторые устройства всегда активны, в то время как другие проводят большую часть своего времени в спящем режиме.
Устройства ZigBee должны быть совместимы со стандартом IEEE 802.15.4-2003 беспроводных персональных сетей (исключая профиль 2.0 «рационального использования энергии»). Стандарт определяет нижние слои протокола — физический слой (PHY), и контроль доступа (MAC) часть ссылки на слой данных (DLL). Этот стандарт определяет работу на частотах 2.4 ГГц (в мире, не лицензированная частота), 915 МГц (Американский континент) и 868 МГц (Европа) диапазон ISM. На частоте 2.4 ГГц есть 16 каналов ZigBee, каждый канал требует ширины диапазона в 5 МГц. Основная частота для каждого канала может быть рассчитана как FC = (2405 + 5 * (ch — 11)) МГц, где ch = 11, 12, …, 26.
Радио используют широкополосную модуляцию с прямым расширением спектра которая управляется цифровым потоком в модуляторе. Двоичная фазовая манипуляция используется на полосах в 868 и 915 МГц, а офсетная квадратурная фазовая манипуляция передающая по 2 бита в символе используется на полосе 2,4 ГГц. В чистом виде, при передаче через воздух скорость передачи данных составляет 250 кбит/с для каждого канала в диапазоне 2.4 ГГц, 40 кбит/с для каждого канала в диапазоне 915 МГц и 20 кбит/с в диапазоне 868 МГц. Расстояние передачи от 10 до 75 метров и свыше 1500 метров для Zigbee pro, хотя оно сильно зависит от отдельного оборудования. Максимальная выходная мощность радио в основном составляет 0 дБм (1 мВт).
Базовый режим доступа к каналу «контроль несущей частоты, многократный доступ/избежание коллизий кадров» (CSMA/CA- вероятностный сетевой протокол канального (МАС) уровня). То есть перед тем как узлы начинают передачу по пути обмена информацией для людей, они кратко проверяются, что ни один из них не ведёт передачу перед началом общей работы. Существуют три знаменитые исключения для работы CSMA. Маячки посылаются за предусмотренный промежуток времени и CSMA не используется. Подтверждения посланий также не используют CSMA. Наконец устройства в маячковых ориентированных сетях, которые имеют низкую скрытность в требованиях режима реального времени могут также использовать слоты гарантированного времени., которые по определению не используют CSMA.

ZigBee RF4CE
3 марта 2009 концерн RF4CE (Радиочастоты для бытовой электроники) согласился работать с альянсом ZigBee для совместного распространения стандартизированной спецификации, предназначенной для радиочастотного дистанционного управления. ZigBee RF4CE был разработан для широкого употребления в дистанционно управляемой аудио/видео продукции, такой как телевизоры и телеприставки. Это обещает множество преимуществ по сравнению с существующими техническими решениями для дистанционного управления, включая расширение связей, повышение надежности работы, расширенные возможности и гибкость, совместимость, и ухода от барьера прямой видимости.

Программное и аппаратное обеспечение
Программное обеспечение разработано с целью упрощения процесса построения небольших недорогих микропроцессоров. Радиоразработки, используемые в ZigBee тщательно оптимизированы, чтобы достичь низкой цены среди большого числа продукции этой линейки. Есть несколько аналоговых каскадов, где возможно используются цифровые контуры.
Хотя радиопередатчики сами по себе недороги, процесс квалификации ZigBee включает в себя полную проверку требований на физическом уровне. Такая подробная доводка физического уровня имеет многочисленные преимущества, так как все радиомодули, полученные из этого набора полупроводниковых элементов, будут обладать теми же RF-характеристиками. С другой стороны, если физический уровень будет не сертифицирован, неправильное функционирование может уменьшить длительность работы батарей в других устройствах, включённых в сеть ZigBee. Там где другие протоколы могут скрывать плохую чувствительность или другие скрытые проблемы, что проявляется в искажённой уменьшенной реакции ZigBee радио имеют жёсткие инженерные ограничения, касающиеся как энергопитания так и широты диапазона. Таким образом, радио проходят испытания сертифицированными лабораториями с указаниями пункта 6 из 802.15.4-2006 стандарта. Существуют решения, объединяющие микроконтроллер и радиопередатчик в одном корпусе, например микроконтроллеры серии STM32W от компании STMicroelectronics.

Лицензирование
Спецификация ZigBee доступна для широкой публики при условиях некоммерческого использования. Входной уровень членства в альянсе ZigBee, называемый Adopter, обеспечивает доступ к ещё не опубликованным спецификациям и разрешает создавать продукты для коммерческого использования спецификации. Регистрация в ходе использования спецификации ZigBee требует от коммерческого разработчика присоединения к альянсу ZigBee. «Ни одна часть этой спецификации не может быть использована для производства продуктов или продажи без членства в альянсе ZigBee.» Происходят ежегодные конфликты по поводу оплаты с общей публичной лицензией GNU. Согласно пункту 2-b: «Вы должны быть уверены в том, что любая работа, которую вы распространяете или публикуете, если вся эта работа или её часть содержит программу или извлечёна из программы или из любой её части, вся эта работа должна быть лицензирована как целое без передачи третьим лицам, согласно условиям данной лицензии». С тех пор как лицензия GPL не делает различий между коммерческим и некоммерческим использованием невозможно выполнить лицензирование стека ZigBee согласно GPL или совместить выполнение ZigBee с лицензионным кодом GPL. Требование к разработчику присоединиться к альянсу ZigBee также вступает в конфликт с другими лицензиями свободного программного обеспечения.

Государственное регулирование
Россия
Применение сетей ZigBee в Российской Федерации в частотном диапазоне 2400-2483,5 МГц не требует получения частотных разрешений и дополнительных согласований (Решение ГКРЧ при Мининформсвязи России от 07.05.2007 № 07-20-03-001), решения ГКРЧ постоянно обновляются, решение от 07.05.2007 № 07-20-03-001 давно претерпело несколько раз изменения, однако смысл остается близко подобным

История
Сети, образованные по протоколу ZigBee, начали рассматриваться с 1998, когда многие установщики осознали, что протоколы WiFi и Bluetooth стали неподходящими для многих приложений. В частности, многие инженеры увидели необходимость в самоорганизуемых ad-hoc сетях.
Стандарт IEEE 802.15.4 был создан в мае 2003.
Летом 2003 главный поставщик ячеистых сетей Philips Semiconductors прекратил инвестиции. Однако Philips Lighting продолжил участие со стороны данной корпорации, которая осталась покровителем (промоутером) в составе совета директоров альянса ZigBee.
О создании альянса ZigBee было объявлено в 2004. В следующем году число его членов удвоилось и выросло до более чем 100 компаний в 22 странах. К апрелю 2005 число участников достигло более 150 компаний и к декабрю 2005 до 200 компаний.
Спецификации ZigBee были ратифицированы 14 декабря 2004.
Альянс ZigBee объявляет о доступности для общественности Спецификации 1.0 13 июня 2005 года (известный сейчас как спецификация ZigBee 2004).
Альянс ZigBee объявляет о завершении и немедленной готовности членов расширенной версии стандарта ZigBee сентября 2006, известной сейчас как спецификация ZigBee 2006.
В течение последнего квартала 2007 года расширенная спецификация ZigBee — ZigBee Pro Feature Set была завершена.

Происхождение термина ZigBee
Имя бренда происходит от поведения медовых пчёл после возвращения их в улей.

Примечания
См. также
Z-Wave — беспроводной протокол связи для домашней автоматизации более популярный в США

Ссылки
Zigbee Alliance homepage
IEEE 802.15.4 web site
ZigBee Review and comparison to other home automation technologies
ZigBee Tutorial
ZigBee Resources including whitepapers and specification updates
ZBOSS ZigBee Open Source Stack, Certified by Zigbee Alliance  (недоступная ссылка)
FreakZ open source Zigbee project, Project homepage, and Zigbee/802.15.4 chip comparison
XBee.NET Library for the Microsoft .NET Framework