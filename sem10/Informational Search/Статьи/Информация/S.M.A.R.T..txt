S.M.A.R.T. (от англ. self-monitoring, analysis and reporting technology — технология самоконтроля, анализа и отчётности) — технология оценки состояния жёсткого диска встроенной аппаратурой самодиагностики, а также механизм предсказания времени выхода его из строя. Технология S.M.A.R.T. является частью протокола ATA (ныне распространенного в интерфейсе SATA).
Современные SSD накопители с SATA интерфейсом также поддерживают S.M.A.R.T. Однако широко распространённые USB флешки практически не поддерживают S.M.A.R.T. поскольку USB Mass Storage device class основан на другом протоколе, SCSI, который не содержит аналогичной S.M.A.R.T. функциональности. Существует небольшое количество топовых флешек, сделанных на основе SATA контроллеров и переходников SATA-USB, работающих по спецификации SAT (SCSI-ATA Translation). Некоторые из таких переходников поддерживают трансляцию S.M.A.R.T. данных.

История
Первый жёсткий диск, обладающий системой самодиагностики, был представлен в 1992 году фирмой IBM в дисковых массивах IBM 9337 для серверов AS/400, использующих IBM 0662 SCSI-2 диски. Технология была названа Predictive Failure Analysis (PFA). Измерялось несколько ключевых параметров, их оценка производилась непосредственно контроллером диска. Результат был ограничен лишь одним битом: либо всё в порядке, либо диск может в скором времени выйти из строя.
Позже компаниями Compaq, Seagate, Quantum и Conner была разработана другая технология, названная IntelliSafe. В ней был общий протокол выдачи информации о состоянии жёсткого диска, но измеряемые параметры и их пороги каждая компания определяла самостоятельно.
В начале 1995 года Compaq предложила стандартизировать технологию. Компании IBM, Seagate, Quantum, Conner и Western Digital (последняя на тот момент ещё не имела системы отслеживания параметров жёсткого диска) поддержали эту идею. За основу была взята технология IntelliSafe. Совместно разработанный стандарт назвали S.M.A.R.T.
Стандарт S.M.A.R.T. I предусматривал мониторинг основных параметров и запускался только после команды.
В разработке S.M.A.R.T. II участвовала Hitachi, предложившая методику полной самодиагностики накопителя (extended self-test), также появилась функция журналирования ошибок.
В S.M.A.R.T. III появилась функция обнаружения дефектов поверхности и возможность их восстановления «прозрачно» для пользователя.

Описание
S.M.A.R.T. производит наблюдение за основными характеристиками накопителя, каждая из которых получает оценку. Характеристики можно разбить на две группы:

параметры, отражающие процесс естественного старения жёсткого диска (число оборотов шпинделя, число перемещений головок, количество циклов включения-выключения);
текущие параметры накопителя (высота головок над поверхностью диска, число переназначенных секторов, время поиска дорожки и количество ошибок поиска).Данные хранятся в шестнадцатеричном виде, называемом raw value («сырые значения»), а затем пересчитываются в value — значение, символизирующее надёжность относительно некоторого эталонного значения. Обычно value располагается в диапазоне от 0 до 100.
Высокая оценка говорит об отсутствии изменений данного параметра или медленном его ухудшении. Низкая — о возможном сбое в скором времени.
Значение, меньшее, чем минимальное, при котором производителем гарантируется безотказная работа накопителя, означает выход узла из строя.
Технология S.M.A.R.T. позволяет осуществлять:

мониторинг параметров состояния;
сканирование поверхности;
сканирование поверхности с автоматической заменой сомнительных секторов на надёжные.Следует заметить, что технология S.M.A.R.T. позволяет предсказывать выход устройства из строя в результате механических неисправностей, что составляет около 60 % причин поломки жёсткого диска. Предсказать последствия скачка напряжения или механического удара S.M.A.R.T. не способна.
Следует отметить, что накопители не могут самостоятельно сообщать о своём состоянии посредством технологии SMART, однако для этого существуют специальные программы. Таким образом, использование технологии S.M.A.R.T. невозможно без наличия следующих двух составляющих:

ПО, встроенного в контроллер накопителя;
Внешнего ПО, встроенного в хост.Программы, отображающие состояние S.M.A.R.T.-атрибутов, работают по следующему алгоритму:

Проверка наличия поддержки накопителем технологии S.M.A.R.T.;
Посылка команды запроса S.M.A.R.T.-таблиц;
Получение таблиц в буфер приложения;
Расшифровка табличных структур, извлечение номера атрибута и его числового значения;
Сопоставление стандартизированных номеров атрибутов их названиям (иногда — в зависимости от типа, модели или производителя, как, например, в программе Victoria);
Вывод числовых значений в удобном для восприятия виде (например, конвертация шестнадцатеричных значений в десятичные);
Извлечение из таблиц флагов атрибутов (признаков, характеризующих назначение атрибута в данном накопителе, например, «жизненно важный» или «счётчик»);
Вывод общего состояния устройства на основании всех таблиц, значений и флагов.

Атрибуты S.M.A.R.T
Таблица известных атрибутов S.M.A.R.T. выглядит следующим образом:

Тесты
Жёсткие диски с поддержкой SMART версии 2 и старше, предлагают ряд различных тестов:
Короткий (Short)Проверяет электрические и механические параметры, а также производительность на чтение. Тест, как правило, длится около двух минут.Длинный/расширенный (Long/extended)Тест проверяет всю поверхность диска и не имеет ограничения по времени. В среднем занимает около двух-трёх часов.Тест транспортировки (Conveyance)Быстрый тест, предназначенный для оценки состояния диска после транспортировки диска от производителя к поставщику.Выборочный (Selective)Некоторые диски позволяют проверить определённую часть поверхности.Журнал тестов SMART может содержать результаты только 21 последних тестов и доступен только для чтения. Иными словами, сбросить его штатными средствами невозможно. Журнал представляет собой таблицу из следующих колонок: порядковый номер теста, тип теста, результат теста, сколько процентов осталось до завершения, время жизни диска, LBA.

См. также
TRIM
Hdparm
E2fsprogs
Comparison of S.M.A.R.T. tools
smartctl
Badblocks
SpeedFan
CrystalDiskInfo
HDDScan
HD Tune
HDDlife
Hard Drive Inspector
OpenMediaVault

Примечания
Ссылки
Производители дисков:

Western Digital: KB:Diagnostic Error Codes (англ.)Другое:

Failure Trends in a Large Disk Drive Population (англ.)
Оцениваем состояние жёстких дисков при помощи S.M.A.R.T.
HDDScan — Бесплатная утилита для просмотра S.M.A.R.T-атрибутов накопителя на Windows, официальный русскоязычный сайт HDDScan R.LAB, официальный англоязычный сайт HDDScan (англ.)
S.M.A.R.T. attribute list (ATA) and S.M.A.R.T. attribute list (SCSI) (англ.)
Мониторинг состояния hdd с помощью утилиты S.M.A.R.T. HDD на FreeBSD