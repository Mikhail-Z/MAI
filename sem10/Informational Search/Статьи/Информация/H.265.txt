H.265 или HEVC (англ. High Efficiency Video Coding — высокоэффективное кодирование видеоизображений) — формат видеосжатия с применением более эффективных алгоритмов по сравнению с H.264/MPEG-4 AVC. Рекомендация МККТТ H.265, а также стандарт ISO/IEC 23008-2 MPEG-H Часть 2, — совместная разработка экспертной группы по видеокодированию МККТТ ( ITU-T Video Coding Experts Group — VCEG) и экспертной группы по движущемуся изображению MPEG. Рекомендация стандарта разработана в связи с растущей потребностью в более высокой степени сжатия движущихся изображений для самых разных приложений, таких как потоковая передача в интернете, передача данных, видеоконференц-связь, цифровые запоминающие устройства и телевизионное вещание.
Поддерживаются форматы кадра до 8K (UHDTV) с разрешением 8192×4320 пикселей.

История
В 2004 году VCEG приступила к исследованию развития технологий, которые позволили бы создать новый стандарт сжатия видео (или добиться существенного улучшения стандарта H.264/MPEG-4 AVC). В октябре 2004 года произведён обзор различных способов возможного усовершенствования H.264/MPEG-4 AVC.Изначально предусматривалось, что H.265 будет полностью новым стандартом, а не расширением H.264 вроде HVC (High-performance Video Coding). В рамках проекта были присвоены предварительные имена H.265 и H.NGVC (англ. Next-generation Video Coding — следующее поколение видеокодирования), также существовала значительная часть работы VCEG до её эволюции в HEVC, совместный проект с MPEG в 2010 году. В апреле 2009 года проект получил название NGVC; в июле 2009 состоялось совещание MPEG и VCEG, на котором обсуждалась дальнейшая совместная работа по NGVC и HVC.
Предварительные требования к NGVC состоят в уменьшении битрейта на 50 % при схожей субъективной оценке качества изображения и сравнимой с H.264 High profile вычислительной сложностью. В зависимости от настроек предполагается варьирование вычислительной сложности от 1/2 до 3 по сравнению с H.264 High profile, при этом в первом случае NGVC должен обеспечивать на 25 % меньший битрейт.ISO / IEC Moving Picture Experts Group (MPEG) начала аналогичный проект в 2007 году, предварительно названный Высокопроизводительное видеокодирование (High-performance Video Coding). В июле 2007 года было принято решение в качестве цели проекта достигнуть снижения битрейта на 50 %. К июлю 2009 года результаты эксперимента показали среднее снижение скорости потока примерно на 20 % по сравнению с AVC High Profile, эти результаты побудили MPEG начать стандартизацию в сотрудничестве с VCEG.
Для разработки стандарта MPEG и VCEG создали Объединенную команду по видеокодированию Joint Collaborative Team on Video Coding (JCT-VC) (ITU-T Rec H.264|ISO/IEC 14496-10). Первое заседание Объединенной команды по видеокодированию (JCT-VC) состоялось в апреле 2010 года. Было представлено 27 полноценных проектов. Оценки показали, что некоторые предложения могут достичь такого же качества изображения, как AVC, лишь с половинным битрейтом во многих испытаниях, при 2—10-кратном увеличении вычислительной сложности, и в некоторых проектах были достигнуты хорошее субъективное качество и хорошие результаты скорости передачи данных с более низкой вычислительной сложностью, чем при референсном кодировании AVC с высоким профилем. На этом совещании было принято название для совместного проекта — высокоэффективное видеокодирование High Efficiency Video Coding (HEVC).Комитет Проекта HEVC был утвержден в феврале 2012 года. В июне 2012 года MPEG LA объявила о начале процесса принятия совместных лицензий на патенты HEVC. Проект международного стандарта был утвержден в июле 2012 года на совещании, состоявшемся в Стокгольме. Fröjdh, председатель шведской делегации MPEG, считает, что коммерческие продукты, которые поддерживают HEVC, могут быть выпущены в 2013 году.29 февраля 2012 года на выставке Mobile World Congress компания Qualcomm показала HEVC-декодер, работающий на планшете под управлением ОС Android с двухъядерным процессором Qualcomm Snapdragon S4 с частотой 1,5 ГГц. Показывались две версии видеозаписи с одинаковым содержанием, закодированными H.264/MPEG-4 AVC и HEVC. На этом показе HEVC показал почти 50%-е снижение скорости передачи по сравнению с H.264/MPEG-4 AVC.31 августа 2012 Allegro DVT объявила о выпуске двух HEVC-вещательных кодеров: кодер AL1200 HD-SDI и IP-транскодер AL2200. Allegro DVT заявила, что аппаратных декодеров HEVC не следует ожидать до 2014 года, но HEVC сможет применяться и раньше в приложениях с программным декодированием. На выставке IBC 2012 Allegro DVT показала HEVC-системы потокового IP-вещания на основе IP-транскодера AL2200.
Ericsson в сентябре 2012 года на выставке International Broadcasting Convention (IBC) представила первый в мире HEVC-кодер, Ericsson SVP 5500, который предназначен для кодирования видео в реальном времени для трансляции эфирного ТВ в сетях подвижной связи.В апреле 2013 года проект принят в качестве стандарта МСЭ-T.На начало 2017 на аппаратном уровне реализована частичная поддержка стандарта HEVC всеми крупными производителями процессоров.В качестве требований к стандарту предложено много новых возможностей:
Двумерный неразделимый адаптивный интерполяционный фильтр (AIF)
Разделимый AIF
Направленный AIF
Компенсация движения с точностью до 1/8-пикселя (Qpel)
Адаптивное предсказание ошибок кодирования (APEC) в пространственной и частотной областях
Адаптивный выбор матрицы квантования (AQMS)
Основанная на сравнении схема выбора и кодирования вектора движения
Режимозависимое изменение настройки внутрикадрового кодированияПредполагается, что эти приёмы принесут наибольшую пользу при многопроходном кодировании.

Эффективность кодирования
Разработка большинства стандартов видеокодирования предназначена, в первую очередь, для достижения наибольшей эффективности кодирования. Эффективность кодирования определяется способностью закодировать видео с минимально возможным битрейтом при сохранении определённого уровня качества видео. Существует два стандартных способа измерения эффективности кодирования видео, один из которых заключается в использовании объективной метрики, такой как пикового отношения сигнал-шум (PSNR), а второй состоит в использовании субъективной оценки качества видео. Субъективная оценка качества изображения является наиболее важным параметром для оценки кодирования видео, так как зрители воспринимают качество видео именно субъективно.
Вместо макроблоков, которые применялись в H.264, в HEVC используются блоки с древовидной структурой кодирования. Выигрыш кодера HEVC — в применении блоков большего размера. Это было показано в тестах PSNR с моделью кодера HM-8.0, где сравнивались результаты кодирования с разными размерами блоков. В результате тестов было показано, что по сравнению с кодированием блоков размером 64x64 пикселей битрейт увеличивается на 2,2 %, когда используются блоки размером 32x32 и увеличивается на 11,0 %, когда используется размер блоков 16х16. В тестах кодирования видео с разрешением 2560x1600 пикселей при использовании блоков с размером 32x32 пикселей битрейт увеличивается на 5,7 %, а при использовании блоков размером 16x16 пикселей — на 28,2 %, по сравнению с видео, где использованы блоки размером 64х64, при одинаковом пиковом отношении сигнал-шум. Тесты показали, что применение блоков большего размера более эффективно при кодировании видео с высоким разрешением. Тесты также показали, что для декодирования видео, закодированного с размерами блоков 16х16, требуется на 60 % больше времени, чем при использовании блоков 64x64. То есть, применение блоков бо́льших размеров повышает эффективность кодирования при одновременном сокращении времени декодирования.Было проведено сравнение эффективности кодирования основного профиля Н.265 с кодеками H.264/MPEG-4 AVC High Profile (HP), MPEG-4 Advanced Simple Profile (ASP), H.263 High Profile Latency (HLP) и H .262/MPEG-2 Main Profile (MP). Были закодированы видео развлекательных программ и девять тестовых видеопоследовательностей с двенадцатью различными битрейтами с использованием тестовой модели HEVC HM-8.0, пять из них были с HD-разрешением, а четыре были с разрешением WVGA (800 × 480). Уменьшение битрейта определялось на основе PSNR.

Структура кодера HEVC
При кодировании видео в HEVC применяется такой же «гибридный» подход, что и во всех современных кодеках, начиная с H.261. Он заключается в применении внутри- и межкадрового (Intra-/Inter-) предсказания и двумерного кодирования с преобразованием.
В кодере HEVC каждый видеокадр делится на блоки. Первый кадр видеопоследовательности кодируется с использованием только внутрикадрового предсказания, то есть применяется пространственное предсказание ожидаемого уровня отсчёта внутри кадра по соседним отсчётам, при этом отсутствует зависимость от других кадров. Для большинства блоков всех остальных кадров последовательности, как правило, используется режим межкадрового временного предсказания. В режиме межкадрового предсказания на основании данных о величине отсчётов опорного кадра и вектора движения оцениваются текущие отсчёты каждого блока. Кодер и декодер создают идентичные межкадровые предсказания путём применения алгоритма компенсации движения с помощью векторов движения и данных выбранного режима, которые передаются в качестве дополнительной информации.
Разностный сигнал предсказания, который представляет собой разницу между опорным блоком кадра и его предсказанием, подвергается линейному пространственному преобразованию. Затем коэффициенты преобразования масштабируются, квантуются, применяется энтропийное кодирование, и затем передаются вместе с информацией предсказания.
Кодер в точности повторяет цикл обработки декодером так, что в обоих случаях будут генерироваться идентичные предсказания последующиих данных. Таким образом, преобразованные квантованные коэффициенты подвергаются обратному масштабированию и затем обратному преобразованию, чтобы повторить декодированное значение разностного сигнала. Разность затем добавляется к предсказанию, и полученный результат фильтруется для сглаживания артефактов, полученных делением на блоки и при квантовании. Окончательное представление кадра (идентичное кадру на выходе декодера) хранится в буфере декодированных кадров, которое будет использоваться для прогнозирования последующих кадров. В итоге, порядок кодирования и декодирования обработки кадров часто отличается от порядка, в котором они поступают из источника.
Предполагается, что видеоматериал на входе кодера HEVC имеет прогрессивную развёртку. В HEVC не представлено явных функций кодирования чересстрочной развёртки, так как чересстрочная развёртка не используется в современных дисплеях и имеет всё меньшее распространение. Тем не менее, в HEVC были представлены метаданные, позволяющие указать кодеру, что было закодировано видео с чересстрочной развёрткой в одном из двух режимов: в виде отдельных изображений, как два поля (четные или нечетные строки кадра) или весь кадр целиком. Этот эффективный метод обеспечивает кодирование видеосигнала с чересстрочной разверткой, минуя необходимость нагружать декодеры поддержкой специального процесса декодирования.

Профили
В октябре 2012 года проект включает в себя три профиля: Основной (Main), Основной 10 (Main 10) и Основной профиль неподвижных изображений (Main Still Picture).Профиль — это определённый набор средств кодирования и алгоритмов, которые могут быть использованы для создания видеопотока, соответствующего этому профилю. Кодер при формировании видеопотока определяет, какие компоненты можно использовать для профиля, в то время как декодер должен поддерживать все функции для данного профиля.

Main (Основной профиль)
Для основного профиля определены следующие ограничения:

Глубина цвета — 8 бит на канал (16,78 млн возможных цветов),
Цветовая субдискретизация — 4:2:0,
Размер буфера декодера ограничивается 6 кадрами максимального размера яркостной компоненты для этого уровня.

Main 10 (Основной профиль 10)
Main 10 — профиль для кодирования видео с глубиной цвета 10 бит на канал.Сравнение основных элементов кодеров:

Main Still Picture (Основной профиль неподвижных изображений)
Основной профиль неподвижных изображений позволяет кодировать отдельное изображение при соблюдении некоторых ограничений, соответствующих Основному профилю.

Уровни
В октябре 2012 года проект HEVC определяет два слоя, Основной (Main) и Высокий (High), и 13 уровней. Уровень (Level) представляет собой набор ограничений для потока данных, связанных с вычислительными возможностями декодера и загрузкой памяти. Уровень устанавливается, исходя из максимальной частоты дискретизации, максимального размера кадра, максимальной скорости потока, минимальной степени сжатия и возможностей кадрового буфера декодера и кодера. Понятие слой (англ. Tier — ярус) было введено для приложений, которые различаются только максимальной скоростью потока и ёмкостью кадрового буфера кодера. Основной слой был разработан для большинства приложений, а Высокий уровень предназначен для приложений с повышенными требованиями. Декодер, соответствующий определенному слою и уровню, должен декодировать все потоки, закодированные с параметрами этого слоя и уровня и всех более низких слоев и уровней. Для уровней ниже четвёртого допускается только Основной слой.

Примечания
См. также
x265 — свободная библиотека программных компонентов для кодирования видеопотоков H.265.
VP9
Daala
BPG

Ссылки
Draft meeting report for 31st VCEG Meeting (Marrakech, MA, 15-16 January 2007)
Video Coding Experts Group (VCEG)
Overview of the High Efficiency Video Coding (HEVC) Standard
Технология потокового ТВ видео Ultra HD 4K в качестве H.265 (январь 2013 года) интернет-журнал TV-Magazine.ru
Информация об открытом ПО для кодирования в H.265
H.265 (HEVC) — маркетинговый трюк или что-то большее? Что несёт с собой грядущая смена стандарта кодирования Security News
HEVC Video Codecs Comparison - сравнение кодеков HEVC от видеогруппы Лаборатории компьютерной графики и мультимедиа МГУ
Moscow State Releases First HEVC Comparison - краткое описание методики сравнения кодеков от МГУ