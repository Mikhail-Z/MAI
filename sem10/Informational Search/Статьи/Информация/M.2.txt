M.2 (ранее известный как Next Generation Form Factor и NGFF) — спецификация компактных компьютерных карт расширения и их разъёмов. Был создан в качестве замены формату mSATA и Mini PCI-E, использовавшему физический разъём и размеры модулей PCI Express Mini Card. Стандарт M.2 допускает более разнообразные размеры модулей, как по ширине, так и по длине. Формат M.2 часто используется для реализации производительных твердотельных накопителей (на базе флеш-памяти, SSD), особенно при использовании в компактных устройствах, таких как ультрабуки и планшеты.
Интерфейсы, выведенные на разъём M.2, являются надмножеством интерфейса SATA Express. Фактически, M.2 является более компактной реализацией SATA Express (предоставляет поддержку шин PCI Express 3.0 и SATA 3.0), дополненной внутренним интерфейсом USB 3.0. Платы M.2 могут иметь различные ключевые вырезы для обозначения конкретного варианта используемого интерфейса.

Возможности
Карты расширения M.2 могут предоставлять различные функции, например: Wi-Fi, Bluetooth, спутниковая навигация, NFC-радиосвязь, цифровое радио, Wireless Gigabit Alliance (WiGig), Wireless WAN (WWAN). В виде модулей M.2 часто изготавливают быстрые и компактные твердотельные флеш-накопители (SSD). На разъём M.2 выводятся шины PCI Express 3.0, Serial ATA 3.0 и USB 3.0 (включая обратную совместимость с USB 2.0). Спецификация SATA 3.2 по состоянию на август 2013 определила формат «SATA M.2» для носителей информации.
В составе M.2 реализован PCI Express 4x (4 линии) и один порт SATA 3.0 со скоростью до 6 Гбит/с, поэтому в форм-факторе M.2 могут быть реализованы как устройства PCI Express, так и накопители SATA. Используется стандартный PCI Express без каких-либо дополнительных слоёв абстракции. Группа PCI-SIG выпустила спецификацию M.2 версии 1.0 в декабре 2013 года.
Для карт расширения M.2 доступно три варианта реализации логического интерфейса и набора команд, по аналогии со стандартом SATA Express:

«Legacy SATA»
Используется для SSD с SATA интерфейсом, драйвером AHCI и скоростями до 6.0 Гбит/с (SATA 3.0)«SATA Express» с использованием AHCI
Используется для SSD с интерфейсом PCI Express и драйвером AHCI (для совместимости с большим количеством операционных систем). Из-за использования AHCI производительность может быть несколько ниже оптимальной (получаемой с NVMe), так как AHCI был разработан для взаимодействия с более медленными накопителями с медленным последовательным доступом (например, НЖМД), а не для SSD с быстрым случайным доступом.«SATA Express» с использованием NVMe
Используется для SSD с интерфейсом PCI Express и высокопроизводительным драйвером NVMe, созданным для работы с быстрыми флеш-накопителями. NVMe был разработан с учётом низких задержек и параллелизма SSD с интерфейсом PCI Express. NVMe лучше использует параллелизм в управляющем компьютере и программном обеспечении, требует меньше стадий при передаче данных, предоставляет более глубокую очередь команд и более эффективную обработку прерываний.

Форм-фактор и ключи
Стандарт M.2 разрабатывался в качестве обновления и улучшения формата mSATA, позволяя использовать печатные платы большего размера. Если mSATA использовал размеры модулей PCI Express Mini Card, то M.2 позволил увеличить использование площади карты, например, в M.2 возможны более длинные модули и двухстороннее размещение компонентов на плате.
Модули M.2 имеют прямоугольную форму, на одной из сторон карты расположен разъём (75 позиций с 67 контактными площадками с шагом в 0.5 мм). На противоположной стороне находится полукруглое отверстие для фиксации. Каждый контакт выдерживает напряжение до 50 В и ток до 0.5 А. Разъём гарантирует как минимум 60 циклов подключения-отключения.
В стандарте M.2 допускаются модули шириной 12, 16, 22 или 30 мм и длиной 16, 26, 30, 38, 42, 60, 80 или 110 мм. Изначально карты M.2 производились с шириной 22 мм и длиной 30, 42, 60, 80 и 110 мм.

Печатные платы карт расширения M.2 на одном из краёв предоставляют ножевой разъём с 75 позициями. В зависимости от типа модуля, вместо части позиций сделаны ключевые разрезы. Слот M.2 на материнской плате может иметь заглушки на некоторых ключевых позициях, определяя тип модулей и интерфейсы, совместимые с ним. По состоянию на апрель 2014 года, слоты выполнялись с единственной заглушкой, либо в позиции B, либо в позиции M. Например, модуль M.2 с двумя ключевыми разрезами B и M может использовать до двух линий PCI Express и совместим с большим количеством слотов, тогда как карты M.2 с ключом в позиции M могут использовать до 4 линий PCI Express. Оба варианта также могут использовать линии SATA. Сходная система ключей используется для карт M.2 с интерфейсом USB 3.0.Типы карт M.2 маркируются кодом по схеме WWLL-HH-K-K или WWLL-HH-K, где WW и LL — размеры модуля в ширину и длину в миллиметрах. В HH кодируется, является ли модуль односторонним или двухсторонним, а также максимальная допустимая высота (толщина) размещённых на нём компонентов, например «D2». Часть K-K обозначает ключевые разрезы; если модуль использует лишь один ключ, используется одна буква K.
Наиболее популярные форм-факторы M.2 по состоянию на 2016 год: ширина 22 мм, длина 80 или 60 мм (M.2-2280 и M.2-2260), реже 42 мм. Многие ранние M.2 накопители и материнские платы использовали интерфейс SATA. Некоторые материнские платы также реализуют PCI Express. Для SSD наиболее популярны ключи B (SATA и PCIe x2) и M (SATA и PCIe x4). Для подключения карт расширения, например WiFi, используются модули размера 1630 и 2230 и ключи A или E.
Кроме сменных карт расширения, стандарт M.2 определяет вариант модулей, припаиваемых к материнской плате в процессе её изготовления.

Примечания
Ссылки
The Serial ATA International Organization (SATA-IO)
PCIe SSD 101: An Overview of Standards, Markets and Performance, SNIA, August 2013, pp. 6-7
Samsung XP941 M.2 PCIe SSD Review (512 GB), September 22, 2013
LFCS: Preparing Linux for nonvolatile memory devices // LWN.net, April 19, 2013
Interface card mount US patent 20130294023, November 7, 2013
MY Blog: M.2 NGFF SSD Compatibility List, October 19, 2016 = Список совместимости форматов M.2 и компьютерной техники / Блог Выбор Пост, 2016-09-06