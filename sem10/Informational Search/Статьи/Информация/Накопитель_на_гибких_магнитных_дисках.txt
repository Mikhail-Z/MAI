Накопитель на гибких магнитных дисках (англ. floppy disk drive) — дисковод, предназначенный для считывания и записи информации с дискеты.
Приводы (позиционирования головок и вращения) и система считывания-записи управляется электронной схемой, размещённой на печатной плате, которая находится внутри корпуса дисковода. В отечественной терминологии система управления называлась КНГМД — контроллер накопителя на гибких магнитных дисках.
Накопители на гибких дисках, равно как и сами носители — дискеты, были массово распространены с 1970-х и до конца 1990-х годов. В XXI веке НГМД уступают место более ёмким CD, DVD и удобным в использовании флеш-накопителям.

История
1967 год — Алан Шугарт возглавлял команду, которая разрабатывала дисководы в лаборатории фирмы IBM, где были созданы накопители на гибких дисках. Дэвид Нобль (англ. David Noble), один из старших инженеров, работающих под его руководством, предложил гибкий диск (прообраз дискеты диаметром 8″) и защитный кожух с тканевой прокладкой.
1971 год — фирмой IBM была представлена первая дискета диаметром в 8″ (200 мм) с соответствующим дисководом.
1973 год — Алан Шугарт основывает собственную компанию Shugart Associates.
1976 год — Финне Коннер (англ. Finis Conner) пригласил Алана Шугарта принять участие в разработке и выпуске дисководов с жёсткими дисками диаметром 5¼″, в результате чего Shugart Associates, разработав контроллер и оригинальный интерфейс Shugart Associates SA-400, выпустила дисковод для миниатюрных (mini-floppy) гибких дисков на 5¼″, который, быстро вытеснив дисководы для дисков 8″, стал популярным в персональных компьютерах. Компания Shugart Associates также создала интерфейс Shugart Associates System Interface (SASI), который после формального одобрения комитетом ANSI в 1986 году был переименован в Small Computer System Interface (SCSI).
1981 год — компания Sony выводит на рынок дискету диаметром 3½″ (90 мм). В первой версии (DD) объём составляет 720 килобайт (9 секторов). В 1984 году компания Hewlett-Packard впервые использовала этот накопитель в своем компьютере HP-150. Поздняя версия (HD) имеет объём 1440 килобайт (1,44 мегабайта; 18 секторов).
1984 год — компания Apple стала использовать накопители 3½″ в компьютерах Macintosh
1987 год — 3½″ HD накопитель появился в компьютерных системах PS/2 фирмы IBM и становится стандартом для массовых ПК.
1987 год — официально представлены разработанные в 1980-х годах компанией Toshiba дисководы сверхвысокой плотности (англ. Extra High Density, ED), носителем для которых служила дискета ёмкостью 2880 килобайт (2,88 мегабайта; 36 секторов).

Конструкция
Механика
Для считывания с поверхности диска. Двигатель, который осуществляет перемещения головок по диску в двух направлениях с определенным приращением, или шагом, называется шаговым двигателем. Двигатель управляется контроллером диска, который устанавливает головки в соответствии с любым относительным приращением в пределах границ перемещения привода головок. В миниатюрных дисководах на 3½″ головки монтируются на червячной передаче, приводимой в движение непосредственно валом шагового двигателя.
Диски имеют два типа плотности — радиальную и линейную. Радиальная плотность указывает, сколько дорожек может быть записано на диске, и выражается в количестве дорожек на дюйм (англ. Track Per Inch, TPI). Линейная плотность — это способность отдельной дорожки накапливать данные и выражается в количестве битов на дюйм (англ. Bits Per Inch, BPI). Шаговые двигатели не могут осуществлять непрерывное позиционирование, обычно он поворачивается на точно определенный угол и останавливается. Большинство шаговых двигателей, установленных в дисководах гибких дисков, осуществляют перемещение с определенным шагом, связанным с расстоянием между дорожками на диске. За исключением дисковода гибких дисков диаметром 5¼″ ёмкостью 360 Кбайт, которые выпускались только с плотностью 48 TPI и в которых использовался шаговый двигатель с приращением 3,6°, во всех остальных типах дисководов (96 или 135 TPI) обычно используется шаговый двигатель с приращением 1,8°. Кроме того, шаговый двигатель выполняет перемещение между фиксированными ограничителями и должен останавливаться при определенном положении ограничителя.
Позиционирование головок — это операция расположения головок относительно дорожек на диске (узкие концентрические кольца на диске), позволяет приступить к чтению или записи информации на диск. Цилиндр (англ. cylinder) — количество дорожек, с которых можно считать информацию, не перемещая головок. Кольцевые дорожки, расположенные друг под другом на разных сторонах диска, образуют воображаемый цилиндр, отсюда и название. Термин обычно используется как синоним дорожки, а поскольку гибкий диск в дискете имеет две стороны, а дисковод для гибких дисков — только две головки, в гибком диске на один цилиндр приходится две дорожки.

Конструкция дисководов

Электроника
Конструкция дисководов

Подключение
Для подключения дисковода имеются два разъема: один для электрического питания, а другой для передачи данных и сигналов управления. Эти разъемы в компьютерной промышленности стандартизованы: для подключения питания используется четырёхконтактный линейный разъем Mate-N-Lock фирмы AMP большого и малого размеров, сигнальный — 34-контактные разъемы. В дисководах формата 5¼″ обычно используется большой разъем для питания, в то время как в большинстве дисководов формата 3½″ для питания используется разъем меньшего размера.
«Странность» сигнального кабеля заключается в том, что линии 10—16 разрезаны и переставлены (перекручены) между разъемами
дисководов. Это перекручивание переставляет первое и второе положения перемычки выбора дисковода и сигналы включения двигателя, а следовательно, меняет на противоположные установки сигнала «DS» для дисковода, находящегося за перекручиванием. Соответственно все дисководы в компьютере с этим типом кабеля имеют перемычки, установленные одинаково, а настройка и установка дисководов (вместо первый и второй, они обозначаются в системе как A и B) упрощается. Как правило, материнская плата содержит интегрированный контроллер дисководов (равно как и отдельная плата контроллера, существовавшая ранее), обеспечивающий установку пары дисководов.
При подключении кабелей необходимо учитывать их ориентацию, в случае если неправильно подключён сигнальный кабель, лампочка на лицевой панели дисковода будет светиться сразу после подачи питания. В случае же неправильной ориентации кабеля питания на электронную схему управления дисководом вместо 5 В подаётся питание 12 В, что гарантированно приводит к выходу её из строя. Учитывая, что стоимость ремонта штучной платы превышает оптовую стоимость самого дисковода, ремонт дисковода, как правило, экономически не целесообразен.

Электрическое подключение дисководов

Программирование контроллера
Контроллер гибких дисков, со стороны современного программирования, выглядит достаточно примитивно — регистры, имеющие байтовую организацию, сведены в блок из восьми последовательно расположенных ячеек (реально используется лишь часть из них).

Регистр цифрового вывода (англ. Digital Output Register, DOR)
биты 0 и 1 (DS0 и DS1) — двоичное кодирование выбираемого дисковода (одного из четырёх),
бит 2 (nRES) — разрешение работы контроллера («1») / сброс контроллера («0»),
бит 3 (DMAE) — управление работой схемы регенерации сигналов прерывания и прямого доступа к памяти («0» — разрешено, «1» — запрещено),
бит 4 (ME0), 5 (ME1), 6 (ME2) и 7 (ME3), — управление мотором вращения диска дисковода 0, 1, 2 и 3 соответственно («1» — двигатель включен).

Регистр привода ленточного накопителя (англ. Tape Drive Register, TDR)
Предназначен для обслуживания ленточного накопителя, поэтому использует свободные разряды (с третьего по восьмой), но не имеет единого стандарта.

Основной регистр статуса (англ. Main Status Register, MSR)
Доступен только для записи. В «1» соответствующий бит устанавливается в случае следующего состояния:

бит 0 (D0B) — дисковод 0 находится в состоянии поиска,
бит 1 (D1B) — дисковод 1 находится в состоянии поиска,
бит 2 (D2B) — дисковод 2 находится в состоянии поиска,
бит 3 (D3B) — дисковод 3 находится в состоянии поиска,
бит 4 (CB) — контроллер занят выполнением команды,
бит 5 (NDMA) — выполняемая контроллером операция не использует ПДП (NonDMA),
бит 6 (DIO) — текущее направление передачи данных от процессора к контроллеру («0») или от контроллера к процессору («1»),
бит 7 (RQM) — регистр данных FIFO готов к обмену с процессором.

Регистр выбора скорости передачи данных (англ. Data Rate Select Register, DSR)
биты 0 и 1 (DRATE) — кодируют скорость передачи данных:биты 2, 3 и 4 (PRECOMP) — кодируют параметр задержки предкомпенсации:бит 5 не используется, должен содержать «1»,
бит 6 (Power Down) — если «1», то контроллер переходит в режим пониженного электропитания, для выхода используется программный или аппаратный сброс,
бит 7 (S/W Reset) — установка в «1» этого разряда вызовет сброс контроллера. По окончании операции сбрасывается автоматически.

Регистр буфера данных (англ. DATA или англ. FIFO)
Участвует во всех дисковых операциях чтения и записи. Ёмкость — 16 байт.

Регистр цифрового ввода (англ. Digital Input Register)
Доступен только для считывания. Старший разряд (англ. Disk CHange, DCH) отображает сигнал смены диска, остальные — зарезервированные.

Регистр управления конфигурацией (англ. Configuration Control Register, CCR)
Доступен только для записи. Два младших разряда дублируют функции регистра DSR в аспекте задачи скорости передачи данных, остальные разряды зарезервированные.

Сведения о состоянии контроллера ST0—ST3
Сведения о состоянии контроллера хранятся в не имеющих собственных адресов, и поэтому недоступных, регистрах.

Форматы
8″
Первые дисководы были предназначены для работы с дискетами диаметром 8″, которые вмещали 80, 256 или 800 КБ информации.

5¼″
Следующим массовым форматом стали дискеты диаметром 5¼″; распространение с ними получили и соответствующие дисководы.
В качестве устройства для постоянного хранения данных первого массового персонального компьютера — IBM PC, выпущенного в 1981 году фирмой IBM, — предполагалось использовать один или два накопителя на 5¼-дюймовых гибких дисках.
Высота дисковода для 5¼-дюймовых дискет равна 1 U, а ширина почти равна трём его высотам. Это иногда использовали производители корпусов компьютеров, где три устройства, помещённые в квадратную «корзину», могли быть вместе с ней переориентированы с горизонтального на вертикальное расположение.

3½″
Дисководы формата 3½″ высокой плотности (неформатированная ёмкость дискеты, определяемая плотностью записи и площадью носителя, составляет 2 Мб) впервые появились в компьютерах IBM PS/2 в 1987 году. Эти дисководы записывают 80 цилиндров с 18 секторами на дорожке, создавая в результате ёмкость 1,44 Мб, имеют скорость вращения 300 об/мин и записывают в 1,2 раза больше данных, чем дисководы формата 5¼″ на 1,2 Мб (скорость передачи данных в этих дисководах высокой плотности одинакова, и они совместимы с одними и теми же контроллерами высокой и низкой плотности). Для того, чтобы использовать максимальную для большинства стандартных контроллеров дисководов высокой и низкой плотности скорость передачи данных 500 000 бит/с, эти дисководы должны иметь скорость 300 об/мин. Если дисковод будет вращать дискету со скоростью 360 об/мин (как дисковод формата 5¼″), то число секторов на дорожку должно быть уменьшено до 15, иначе контроллер не будет успевать обрабатывать сигналы.
Промышленный выпуск дисководов сверхвысокой ёмкости на 2,88 Мбайт Toshiba начала 1989 году. В 1991 году IBM официально приняла эти дисководы для установки в компьютерах PS/2, и практически все PS/2, выпущенные с тех пор, содержат эти дисководы как стандартное оборудование. Для работы с такими дисководами требуется установленная ОС MS-DOS версии 5.0 или старше.
Для правильной работы дисковода на 2,88 Мб необходимо обновление дискового контроллера, так как эти дисководы имеют ту же скорость вращения 300 об/мин, но записывают 36, а не 18 секторов на одной дорожке. В отличие от контроллеров дисководов предыдущих форматов, максимальная скорость передачи данных которых составляет 500 000 бит/с, для того что бы эти 36 секторов были считаны или записаны за то же время, которое требуется дисководу на 1,44 Мбайт для чтения и записи 18 секторов, от контроллера требуется гораздо более высокой скорости передачи данных, 1 000 000 бит/с.